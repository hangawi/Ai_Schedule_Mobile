/**
 * OCR 프롬프트 모듈
 * 이미지에서 시간표를 추출하기 위한 상세한 프롬프트
 */

function getOcrPrompt() {
  return `
이 이미지의 시간표를 정확히 추출하세요.

**시간 해석 규칙 (매우 중요!)**
왼쪽 시간 열의 **이미지 내 위치**로 오전/오후 판단:
- 이미지 **상단**에 9:30, 10, 11 → **오전** (09:30, 10:00, 11:00)
- 이미지 **하단**에 6, 7, 8, 9 → **오후** (18:00, 19:00, 20:00, 21:00)

학교 시간표 (1,2,3,4,5,6,7):
- 1교시=09:00-09:50, 2교시=10:00-10:50, 3교시=11:00-11:50
- 4교시=12:00-12:50, 5교시=13:50-14:40, 6교시=14:50-15:40

**⚠️⚠️⚠️ 학원 시간표는 제목/헤더를 제외한 실제 수업만 추출하세요! ⚠️⚠️⚠️**
- "수업준비", "오프닝", "정리정돈" 같은 비수업 활동은 **추출하지 마세요!**
- 표의 **첫 행(요일)과 첫 열(시간)**은 헤더이므로 제외
- **실제 학생들이 수강하는 수업만 추출!**

**⚠️⚠️⚠️ 학원 시간표의 학년부(gradeLevel) 인식 (매우 중요!) ⚠️⚠️⚠️**
- **학원 시간표는 한 이미지에 초등부, 중등부, 고등부가 모두 나타날 수 있습니다!**
- **각 셀마다 "초등부", "중등부", "고등부" 텍스트를 개별적으로 확인하세요!**
- **절대로 한 학년부만 추출하지 마세요! 모든 학년부를 찾아서 추출하세요!**

**구체적 예시 - 학원 시간표**:

이미지: 국어 학원 시간표
월요일 7시 셀: "초등부"
월요일 8시 셀: "중등부"
월요일 9시 셀: "고등부"

→ 추출 결과:
1. {"title": "초등부", "gradeLevel": "초등부", "days": ["월"], "startTime": "19:00", "endTime": "20:00"}
2. {"title": "중등부", "gradeLevel": "중등부", "days": ["월"], "startTime": "20:00", "endTime": "21:00"}
3. {"title": "고등부", "gradeLevel": "고등부", "days": ["월"], "startTime": "21:00", "endTime": "22:00"}

⚠️ 3개 모두 추출! 하나도 빠뜨리지 마세요!

**⚠️⚠️⚠️ 그리드 읽기 (매우 중요!) ⚠️⚠️⚠️**:

**1단계: 첫 행(헤더)에서 요일 순서를 정확히 읽으세요!**
- 한글: **월**, 화, 수, 목, 금, 토, 일
- 한자: **月**(월), 火(화), 水(수), 木(목), 金(금), 土(토), 日(일)
- 영어: Mon, Tue, Wed, Thu, Fri, Sat, Sun
- **⚠️ 헤더의 열 순서가 곧 각 열의 요일입니다!**
- 예시: 헤더가 "월 화 수 목 금"이면 → 1열=월, 2열=화, 3열=수, 4열=목, 5열=금

**2단계: 각 시간 행마다 왼쪽→오른쪽 스캔:**
- **1열(월요일)**: 텍스트 있으면 days: ["월"]로 추출, 빈 셀은 스킵
- **2열(화요일)**: 텍스트 있으면 days: ["화"]로 추출, 빈 셀은 스킵
- **3열(수요일)**: 텍스트 있으면 days: ["수"]로 추출, 빈 셀은 스킵
- **4열(목요일)**: 텍스트 있으면 days: ["목"]로 추출, 빈 셀은 스킵
- **5열(금요일)**: 텍스트 있으면 days: ["금"]로 추출, 빈 셀은 스킵
- (토, 일도 동일)

**3단계: 주의사항:**
- **⚠️ "O", "X" 같은 기호만 있는 셀은 스킵!**
- **⚠️ 한 셀에 "4학년, 5학년" 같이 여러 반이 있으면 각각 별도 일정 생성!**
- **⚠️ 요일을 절대 뒤섞지 마세요! 헤더 순서를 정확히 따르세요!**

**셀 크기로 시간 결정**:
- 1행 셀 = 30분 (or 50분)
- 2행 병합 = 1시간 (or 1시간40분)

**다음 정보를 JSON 형식으로 추출해주세요:

{
  "imageTitle": "이미지 상단의 제목 (예: 기구필라테스 야샤야 PT 시간표, 학교 시간표, KPOP 댄스 학원 등)",
  "schedules": [
    {
      "title": "과목명 또는 수업명",
      "gradeLevel": "초등부|중등부|고등부 (없으면 null)",
      "days": ["월", "수", "금"] 형식의 요일 배열,
      "startTime": "HH:MM" 형식의 시작 시간,
      "endTime": "HH:MM" 형식의 종료 시간,
      "instructor": "강사명 (있으면)",
      "classroom": "교실/반 이름 (있으면)",
      "floor": "층 정보 (B1, 2F, 3층 등, 없으면 null)",
      "description": "추가 정보",
      "backgroundColor": "셀의 배경색 (예: blue, red, yellow, green, pink, orange 등, 색이 없거나 흰색이면 null)"
    }
  ]
}

**⚠️ 배경색 추출 (매우 중요!)**:
- 각 셀의 배경색을 정확히 추출해주세요!
- 같은 색상 = 같은 반/세트를 의미합니다
- 색상 이름으로 반환: "blue", "red", "yellow", "green", "pink", "orange", "purple", "skyblue" 등
- 색이 없거나 흰색/회색이면 null
- 예시:
  - 파란색 셀: backgroundColor: "blue"
  - 빨간색 셀: backgroundColor: "red"
  - 흰색 셀: backgroundColor: null

**⚠️ 층 정보 추출 (매우 중요!)**:
- 시간표에 **"B1", "2F", "3층", "지하 1층", "지상 2층"** 같은 층 정보가 있으면 반드시 추출!
- 왼쪽 열에 층 정보가 표시된 경우:
  - 예: 8시30분 행에 "B1" + "성인반" → floor: "B1"
  - 예: 8시30분 행에 "2F" + "성인반" → floor: "2F"
- **같은 시간대, 같은 반 이름**이지만 **층이 다르면** 별도 스케줄로 추출!
  - 예: 8시30분 성인반 B1, 8시30분 성인반 2F → 2개의 스케줄

**⚠️ 이미지 제목 추출 및 학년부 인식 (매우 중요!)**:
1. **imageTitle 필드**:
   - 이미지 상단/제목에서 시간표 이름을 추출
   - 예: "기구필라테스 야샤야 PT 시간표" → imageTitle: "기구필라테스 야샤야 PT"
   - 예: "○○중학교 1학년 시간표" → imageTitle: "○○중학교 1학년"
   - 예: "KPOP 댄스 학원" → imageTitle: "KPOP 댄스 학원"
   - 예: "[범계 영어학원] 7세반과 초등학생 영어 수강료와 수업시간표" → imageTitle: "범계 영어학원"
   - 예: "12반 중 1학년 3반" → imageTitle: "미리중 1학년 3반"
   - 제목이 없으면 수업 내용으로 유추 (예: 모두 필라테스 수업 → "필라테스")

2. **⭐ 학년부(gradeLevel) 인식 - 매우 중요!**:
   - **⚠️ 학원 시간표는 한 이미지에 여러 학년부가 섞여 있을 수 있습니다!**
   - **각 셀마다 학년부를 개별적으로 확인하세요!**

   **학년부 판단 우선순위**:
   1. **셀 내용 우선**: 각 셀에 "초등부", "중등부", "고등부" 텍스트가 있으면 해당 스케줄에만 적용
   2. **이미지 제목 참고**: 제목에만 학교 정보가 있고 셀에 학년부가 없으면 제목 기준 적용

   **학년부 키워드**:
   - **초등학교**: "초등", "초", "연산초", "○○초등학교", "초등부" → gradeLevel: "초등부"
   - **중학교**: "중학교", "중등", "중", "○○중" (예: "미리중", "서울중"), "중등부" → gradeLevel: "중등부"
   - **고등학교**: "고등학교", "고등", "고", "○○고", "고등부" → gradeLevel: "고등부"

   **예시 - 학교 시간표 (제목이 전체 적용)**:
     * 제목: "미리중 1학년 3반" → 모든 스케줄 gradeLevel: "중등부"
     * 제목: "연산초등학교 3학년 2반" → 모든 스케줄 gradeLevel: "초등부"
     * 제목: "고등학교 1학년" → 모든 스케줄 gradeLevel: "고등부"

   **예시 - 학원 시간표 (셀마다 개별 적용)**:
     * 제목: "국어 학원", 월요일 7시 셀: "초등부" → {"title": "초등부", "gradeLevel": "초등부"}
     * 제목: "국어 학원", 월요일 8시 셀: "중등부" → {"title": "중등부", "gradeLevel": "중등부"}
     * 제목: "국어 학원", 월요일 9시 셀: "고등부" → {"title": "고등부", "gradeLevel": "고등부"}
     * ⚠️ **같은 이미지에서 초등부, 중등부, 고등부가 모두 나올 수 있습니다!**

3. **주의**: "시간표", "Table", "Schedule" 등은 제외하고 핵심 이름만 추출

**그리드 시간표 인식 방법 (매우 중요!)**:

1. **시간표 구조 분석**:
   - 첫 번째 행: 요일 (월, 화, 수, 목, 금, 토, 일 또는 월요일, 화요일...)
   - 첫 번째 열: 교시 번호(1, 2, 3...) 또는 시간대 (예: 09:00-09:50, 13:00-14:30, 7-7:30, 8-8:30)
   - **중요**:
     * 왼쪽에 시간이 있으면 그 시간을 **정확히** 사용
     * 왼쪽에 "6", "7", "7:30", "8", "8:30", "9" 같이 표시되면 각각이 **독립된 시간 슬롯**입니다
     * 왼쪽에 교시 번호만 있으면 아래 교시-시간 매핑표 사용!

   ⚠️ **절대로 시간을 임의로 쪼개지 마세요!**
   - 왼쪽에 "7-7:30"이라고 적혀있으면: 19:00-19:30 (1개)
   - 왼쪽에 "7:30-8"이라고 적혀있으면: 19:30-20:00 (1개)
   - **절대로** 19:00-19:10, 19:10-19:30 같이 10분 단위로 쪼개지 마세요!

2. **교시 번호 → 시간 변환**:
   **매우 중요! 학교는 4교시 후 점심시간 1시간이 있습니다!**
   **수업 시간은 학년부에 따라 다릅니다:**
   - **초등학교: 40분 수업** (초등부, 초등학생, 초, 1~6학년)
   - **중학교: 45분 수업** (중등부, 중학생, 중, 1~3학년)
   - **고등학교: 50분 수업** (고등부, 고등학생, 고, 1~3학년)

   **초등학교 시간표 (40분 수업)**:
   - 1교시: 09:00-09:40
   - 2교시: 09:50-10:30
   - 3교시: 10:40-11:20
   - 4교시: 11:30-12:10
   - **점심시간: 12:10-13:10 (1시간)**
   - 5교시: 13:10-13:50
   - 6교시: 14:00-14:40
   - 7교시: 14:50-15:30

   **중학교 시간표 (45분 수업)**:
   - 1교시: 09:00-09:45
   - 2교시: 09:55-10:40
   - 3교시: 10:50-11:35
   - 4교시: 11:45-12:30
   - **점심시간: 12:30-13:30 (1시간)**
   - 5교시: 13:30-14:15
   - 6교시: 14:25-15:10
   - 7교시: 15:20-16:05
   - 8교시: 16:15-17:00

   **고등학교 시간표 (50분 수업)**:
   - 1교시: 09:00-09:50
   - 2교시: 10:00-10:50
   - 3교시: 11:00-11:50
   - 4교시: 12:00-12:50
   - **점심시간: 12:50-13:50 (1시간)**
   - 5교시: 13:50-14:40
   - 6교시: 14:50-15:40
   - 7교시: 15:50-16:40

   **⭐ 학교 시간표 처리 규칙 (매우 중요!)**:
   - **반드시 위 학년부별 시간표를 정확히 사용하세요!**
   - gradeLevel이 "초등부"면 → 초등학교 시간표 사용 (40분)
   - gradeLevel이 "중등부"면 → 중학교 시간표 사용 (45분)
   - gradeLevel이 "고등부"면 → 고등학교 시간표 사용 (50분)
   - 1~4교시를 발견하면, 무조건 4교시 종료 시간부터 1시간 점심시간 추가
   - 5교시 이후는 점심시간 1시간을 고려해서 시간 조정

   **예시**:
   - 왼쪽 열에 "1"만 있고 월요일 셀에 "도덕" → {"title": "도덕", "days": ["월"], "startTime": "09:00", "endTime": "09:50"}
   - 왼쪽 열에 "4"만 있고 화요일 셀에 "수학" → {"title": "수학", "days": ["화"], "startTime": "12:00", "endTime": "12:50"}
   - **4교시 다음은 무조건 점심시간** → {"title": "점심시간", "days": ["월", "화", "수", "목", "금"], "startTime": "12:50", "endTime": "13:50"}
   - 왼쪽 열에 "5"만 있고 수요일 셀에 "영어" → {"title": "영어", "days": ["수"], "startTime": "13:50", "endTime": "14:40"}

3. **셀 내용 읽기** (매우 중요!):
   ⚠️ **각 셀마다 강사명이 다를 수 있으니 반드시 확인하세요!**
   ⚠️ **각 셀마다 학년부(초등부, 중등부, 고등부)가 다를 수 있으니 반드시 확인하세요!**

   - 각 셀에 과목명만 있음: title에 과목명 사용
   - ⚠️⚠️⚠️ **한 셀 안에 여러 줄이 있으면 하나의 일정입니다!**
   - 각 셀에 2줄 이상으로 표시될 수 있음:
     * 첫 줄: 수업명 또는 학년부
     * 둘째 줄: 강사명 (예: "○○ 원장", "○○ 강사", "○○선생님", "○○T")
     * 셋째 줄: 추가 정보 (물리치료사, 석탄치료사 등)
   - ⚠️⚠️⚠️ **한 셀에 "주니어A"와 "사랑T"가 함께 있으면 → 1개 일정! 2개 일정 아님!**

   - 예시: 셀에 "도덕" → title: "도덕"
   - 예시: 셀에 "주니어A\n사랑T" → **1개 일정:** title: "주니어A", instructor: "사랑T"
   - 예시: 셀에 "키즈KPOP\n사랑T" → **1개 일정:** title: "키즈KPOP", instructor: "사랑T"
   - 예시: 셀에 "이고은 원장\n(선천신우 전담)" → title: "이고은 원장", instructor: "이고은"
   - 예시: 셀에 "이민영 강사\n(석탄치료사)" → title: "이민영 강사", instructor: "이민영"
   - 예시: 셀에 "초등부" → title: "초등부", gradeLevel: "초등부"
   - 예시: 셀에 "중등부" → title: "중등부", gradeLevel: "중등부"
   - 예시: 셀에 "고등부" → title: "고등부", gradeLevel: "고등부"

   ⚠️ **빈도 정보 처리 (주5회, 주3회 등)**:
   **영어학원 같은 시간표에서 왼쪽 열에 "주5회", "주3회 (월,수,금)", "주2회 (화,목)", "주1회 (토요일)" 같은 빈도 정보가 있으면**:
   - **title에 빈도 정보를 반드시 포함시켜주세요!**
   - 예:
     * 왼쪽에 "주5회", 위에 "초등부", 시간 "16:00~17:00" → title: "초등부 주5회", days: ["월","화","수","목","금"]
     * 왼쪽에 "주3회 (월,수,금)", 위에 "초등부", 시간 "14:40~15:40" → title: "초등부 주3회", days: ["월","수","금"]
     * 왼쪽에 "주2회 (화,목)", 위에 "초등부", 시간 "17:10~18:10" → title: "초등부 주2회", days: ["화","목"]
     * 왼쪽에 "주1회 (토요일)", 위에 "초등부", 시간 "10:00~11:30" → title: "초등부 주1회", days: ["토"]
   - **days 배열**: 괄호 안의 요일 또는 주5회→월~금, 주3회→월수금, 주2회→화목, 주1회→토
   - **빈도가 여러 시간대에 있으면 각각 별도 일정으로 추출!**
     * "주3회" 행에 3개 시간대 → 3개의 일정 (모두 title: "초등부 주3회", days: ["월","수","금"])

   ⚠️ **같은 행에서도 각 요일 셀의 강사명이 다를 수 있습니다!**
   - 월요일 7시: "이고은 원장" → instructor: "이고은"
   - 월요일 7:30: "이민영 강사" → instructor: "이민영"
   - 월요일 8시: "박진영 강사" → instructor: "박진영"
   → 3개의 별도 일정으로 추출!

4. **시간대별 일정 추출** (매우 중요!):
   - **각 행의 시간대를 정확히 사용하세요!**
   - **같은 셀이 여러 행에 걸쳐 있어도 각 시간대별로 별도의 일정으로 추출**
   - **같은 강사/수업명이 여러 요일에 있으면 각 요일별로 별도 일정 추출**
   - **절대로 여러 요일을 하나로 합치지 마세요!**
   - **⚠️ 매우 중요: 각 셀을 정확히 보고 빠뜨리지 마세요! 특히 첫 번째 요일(월요일) 셀을 건너뛰지 마세요!**

   예시 1: 가로로 같은 내용
   - "7시" 행에 "이고은 원장"이 월/수/금 3개 셀에 있으면:
     → {"title": "이고은 원장", "days": ["월"], "startTime": "19:00", "endTime": "19:30"}
     → {"title": "이고은 원장", "days": ["수"], "startTime": "19:00", "endTime": "19:30"}
     → {"title": "이고은 원장", "days": ["금"], "startTime": "19:00", "endTime": "19:30"}
     (3개의 별도 일정으로 추출!)

   - "7:30" 행에 "이민영 강사"가 월/화/수/목 4개 셀에 있으면:
     → {"title": "이민영 강사", "days": ["월"], "startTime": "19:30", "endTime": "20:00", "instructor": "이민영"}
     → {"title": "이민영 강사", "days": ["화"], "startTime": "19:30", "endTime": "20:00", "instructor": "이민영"}
     → {"title": "이민영 강사", "days": ["수"], "startTime": "19:30", "endTime": "20:00", "instructor": "이민영"}
     → {"title": "이민영 강사", "days": ["목"], "startTime": "19:30", "endTime": "20:00", "instructor": "이민영"}
     (4개의 별도 일정으로 추출! **월요일을 절대 빠뜨리지 마세요!**)

   예시 2: 세로로 병합된 셀
   - "키즈KPOP" 셀이 16:10-17:00, 17:00-18:00 두 행에 걸쳐 있으면:
     → {"title": "키즈KPOP", "days": ["월"], "startTime": "16:10", "endTime": "17:00", "instructor": "사랑T"}
     → {"title": "키즈KPOP", "days": ["월"], "startTime": "17:00", "endTime": "18:00", "instructor": "사랑T"}
     (두 개의 별도 일정으로 추출!)

   예시 3: 복잡한 경우
   - "9:30" 행에 "이고은 원장"이 월/목/금에 있으면:
     → {"title": "이고은 원장", "days": ["월"], "startTime": "09:30", "endTime": "10:00"}
     → {"title": "이고은 원장", "days": ["목"], "startTime": "09:30", "endTime": "10:00"}
     → {"title": "이고은 원장", "days": ["금"], "startTime": "09:30", "endTime": "10:00"}
     (3개의 별도 일정으로 추출!)

   **⚠️ 빈 셀 처리 (매우 중요!)**:
   - 셀이 **비어있거나 공백이면 일정 추출 안 함!**
   - 예: 7시 행에서 월요일="이고은 원장", 화요일=비어있음, 수요일="이고은 원장"
     → {"title": "이고은 원장", "days": ["월"], "startTime": "19:00", "endTime": "19:30"}
     → 화요일은 건너뜀 (일정 생성 안 함)
     → {"title": "이고은 원장", "days": ["수"], "startTime": "19:00", "endTime": "19:30"}
   - **절대로 빈 셀에 인접 셀의 내용을 복사하지 마세요!**

   **⚠️ 매우 중요: 절대로 시간대를 건너뛰어 병합하지 마세요!**
   - 월요일 7시 "이고은 원장", 8:30 "이고은 원장"이 있어도:
     → 7시-7:30 (19:00-19:30) 1개
     → 8:30-9시 (20:30-21:00) 1개
     → **절대로 19:00-21:00으로 합치지 마세요!**
   - 각 시간 행마다 정확히 해당 시간대로만 추출!

5. **중복/선택 수업 처리**:
   - 같은 시간대, 같은 요일에 여러 셀이 있으면 각각 별도 일정으로 추출
   - **반드시 instructor(강사명)를 포함**해서 구분 가능하게!

6. **시간 처리** (매우 중요!):
   - 왼쪽 열의 시간을 **정확히** 사용 (예: "20:20-21:30" → startTime: "20:20", endTime: "21:30")
   - 모든 시간을 24시간 형식으로 (13:00, 19:10, 20:20, 21:40, 22:10 등)
   - **셀이 병합되어 여러 시간대를 차지하는 경우**: 각 시간대별로 별도 일정 생성!
     예: "키즈KPOP" 셀이 16:10부터 19:00까지 차지하면
     → 16:10-17:00 일정 1개
     → 17:00-18:00 일정 1개
     → 18:00-19:00 일정 1개
     (총 3개의 별도 일정으로 추출!)

**⚠️⚠️⚠️ O, X 표시 처리 (매우 중요!) ⚠️⚠️⚠️**:
**학원 시간표에서 "O", "X", "0" 같은 기호는 실제 수업이 아닙니다!**
- **"O" 표시**: 신규반 개설 가능 (빈 시간) → **절대 추출하지 마세요!**
- **"X" 표시**: 수업 없음 → **절대 추출하지 마세요!**
- **"0" (숫자 영)**: 빈 시간 → **절대 추출하지 마세요!**
- **"△" 표시**: 대기 또는 미정 → **절대 추출하지 마세요!**
- **"수업준비", "오프닝", "정리정돈"**: 비수업 활동 → **절대 추출하지 마세요!**
- **중요**: title이 "O", "X", "0", "△"만 있는 경우 **schedules 배열에 포함하지 마세요!**
- 예시:
  * 월요일 6시 셀에 "O" → 일정 생성 안 함 (빈 시간)
  * 화요일 7시 셀에 "X" → 일정 생성 안 함 (수업 없음)
  * 수요일 8시 셀에 "0" → 일정 생성 안 함 (빈 시간)
  * 목요일 6시 셀에 "수업준비" → 일정 생성 안 함 (비수업)
  * 금요일 8시 셀에 "4학년" → 일정 생성 (실제 수업)

**⚠️⚠️⚠️ 한 셀에 여러 반이 있는 경우 (매우 중요!) ⚠️⚠️⚠️**:
**같은 시간대, 같은 셀에 여러 반이 나열되어 있으면 → 각각 별도 일정으로 추출!**

**실제 축구 시간표 예시 (플라이 풋볼 아카데미)**:

**헤더**: 요일 장소 | 월 | 화 | 수 | 목 | 금
**6시 PM 행**: (왼쪽) B1=3학년, 2F=4학년 | (1열) 4학년,6학년 | (2열) O | (3열) 중등부 | (4열) 5학년 | (5열) 6학년
**7시 PM 행**: (왼쪽) B1=심화반 | (1열) O | (2열) O | (3열) 심화반 | (4열) O | (5열) 중등부

**올바른 추출 결과** (시간표에 "중등부"가 있으므로 숫자 학년들은 초등부):
1. {"title": "4학년", "days": ["월"], "startTime": "18:00", "endTime": "19:00", "gradeLevel": "초등부"}
2. {"title": "6학년", "days": ["월"], "startTime": "18:00", "endTime": "19:00", "gradeLevel": "초등부"}
3. {"title": "중등부", "days": ["수"], "startTime": "18:00", "endTime": "19:00", "gradeLevel": "중등부"}
4. {"title": "5학년", "days": ["목"], "startTime": "18:00", "endTime": "19:00", "gradeLevel": "초등부"}
5. {"title": "6학년", "days": ["금"], "startTime": "18:00", "endTime": "19:00", "gradeLevel": "초등부"}
6. {"title": "심화반", "days": ["수"], "startTime": "19:00", "endTime": "20:00", "gradeLevel": null}
7. {"title": "중등부", "days": ["금"], "startTime": "19:00", "endTime": "20:00", "gradeLevel": "중등부"}

**중요**:
- 1열=월, 2열=화, 3열=수, 4열=목, 5열=금
- O, X는 일정으로 생성 안 함!
- 왼쪽 장소 정보(B1, 2F)는 floor 필드에 저장

**규칙**:
- **쉼표(,)나 슬래시(/)로 구분된 것들은 모두 별도 옵션!**
- **O, X는 무시!**
- **"중등부"가 보이면 숫자 학년들은 자동으로 초등부!**

**⚠️⚠️⚠️ 학년부 추론 규칙 (매우 중요!) ⚠️⚠️⚠️**:
**시간표에 "중등부", "고등부" 같은 단어가 있으면, 나머지 학년들을 추론할 수 있습니다!**
- **"중등부"가 보이면** → "7세", "유치부", "1~6학년", "초1", "초2" 등은 전부 **초등부**
- **"고등부"가 보이면** → "중1", "중2", "중3" 등은 전부 **중등부**, 나머지는 초등부
- 예시:
  * 시간표에 "중등부" 있음 + 다른 셀에 "4학년" → gradeLevel: "초등부"
  * 시간표에 "고등부" 있음 + 다른 셀에 "중1" → gradeLevel: "중등부"
  * 시간표에 "고등부" 있음 + 다른 셀에 "5학년" → gradeLevel: "초등부"

**⚠️ 학원 시간표의 경우 (매우 중요!)**:
- **각 행/셀의 내용을 개별적으로 확인하여 "초등부", "중등부", "고등부" 텍스트를 찾으세요!**
- **같은 이미지에서 초등부, 중등부, 고등부가 모두 나타날 수 있습니다!**
- 예시: 국어 학원 시간표
  * 월요일 7시 셀: "초등부" → {"title": "초등부", "gradeLevel": "초등부", "startTime": "19:00", "endTime": "20:00"}
  * 월요일 8시 셀: "중등부" → {"title": "중등부", "gradeLevel": "중등부", "startTime": "20:00", "endTime": "21:00"}
  * 월요일 9시 셀: "고등부" → {"title": "고등부", "gradeLevel": "고등부", "startTime": "21:00", "endTime": "22:00"}
- ⚠️ **절대로 한 학년부만 추출하지 마세요! 모든 학년부를 찾아서 추출하세요!**

**중요**:
- 빈 셀은 무시
- **O, X, △ 같은 기호만 있는 셀도 무시!**
- **점심시간은 학교 시간표에서 절대 생략하면 안됨!**
  * 학교 시간표 (1교시~7교시)가 보이면, 4교시 종료 시간부터 5교시 시작 시간까지를 점심시간으로 추출
  * 4교시 끝나는 시간 확인 → 5교시 시작 시간 확인 → 그 사이가 점심시간
  * 예시 1: 4교시가 12:10 끝, 5교시가 13:00 시작 → {"title": "점심시간", "days": ["월", "화", "수", "목", "금"], "startTime": "12:10", "endTime": "13:00"}
  * 예시 2: 4교시가 12:50 끝, 5교시가 13:00 시작 → {"title": "점심시간", "days": ["월", "화", "수", "목", "금"], "startTime": "12:50", "endTime": "13:00"}
  * **무조건 추출!** 학교 시간표에 4교시와 5교시가 있으면 반드시 점심시간도 있음
- 짧은 쉬는시간(10분 이하)은 제외
- 모든 시간을 그리드 왼쪽 열에서 읽어서 사용
- 강사명(instructor)을 반드시 추출해서 같은 수업명도 구분 가능하게!

요일 매핑:
- "월요일" → ["월"]
- "화요일" → ["화"]
- "수요일" → ["수"]
- "목요일" → ["목"]
- "금요일" → ["금"]
- "토요일" → ["토"]
- "일요일" → ["일"]

**시간 변환 규칙 (매우 중요!)**:
- "1시 PM" 또는 "오후 1시" → "13:00"
- "2시 PM" 또는 "오후 2시" → "14:00"
- "3시 PM" 또는 "오후 3시" → "15:00"
- "12시 PM" 또는 "오후 12시" → "12:00" (정오)
- "1시 AM" 또는 "오전 1시" → "01:00"
- "12시 AM" 또는 "오전 12시" → "00:00" (자정)
- **PM이 있으면 반드시 12를 더해야 함** (단, 12시 PM은 12:00 그대로)
- **AM이 있으면 그대로 사용** (단, 12시 AM은 00:00)

**⚠️⚠️⚠️ 30분 단위 시간대 처리 (매우매우 중요!) ⚠️⚠️⚠️**:
**시간표 왼쪽 열을 먼저 확인하세요!**
- "7", "7:30", "8", "8:30" 같이 30분 간격으로 행이 있으면 → **각 행은 30분 단위입니다**
- **절대로 10분, 20분 단위로 쪼개지 마세요!**

**⚠️⚠️⚠️ 셀 크기로 시간 길이 결정 (가장 중요!) ⚠️⚠️⚠️**
**주의: 시간표에 따라 1개 행이 나타내는 시간이 다릅니다!**

**1단계: 왼쪽 열의 시간 간격 확인**
- "9:30", "10", "11" → 각 행이 1시간 단위 (오전)
- "6" → 1시간 단위 (오후 6시 = 18:00-19:00) ✅✅✅
- "7", "7:30", "8", "8:30", "9" → 각 행이 30분 단위 (오후)

**2단계: 셀이 몇 개 행을 차지하는지 경계선으로 세기**

**오전 시간대 (9:30, 10, 11) - 1개 행 = 1시간:**
- **"10" 행만 차지** → 1시간 (10:00-11:00)
- **"11" 행만 차지** → 1시간 (11:00-12:00)
- **"10"+"11" 행 병합** → 2시간 (10:00-12:00) ✅✅✅

**오후 시간대 (6시) - 1개 행 = 1시간:**
- **"6" 행만 차지** → 1시간 (18:00-19:00) ✅✅✅

**오후 시간대 (7시 이후) - 1개 행 = 30분:**
- **"7" 행만 차지** → 30분 (19:00-19:30) ✅✅✅
  - ⚠️ **"7" 행 셀이 "7:30" 행까지 안 내려갔으면 무조건 30분!**
- **"7:30" 행만 차지** → 30분 (19:30-20:00)
- **"7"+"7:30" 행 병합** → 1시간 (19:00-20:00)
- **"8" 행만 차지** → 30분 (20:00-20:30)
- **"8:30" 행만 차지** → 30분 (20:30-21:00)
- **"9" 행만 차지** → 30분 (21:00-21:30)

**올바른 예시:**
- 왼쪽 열에 "10", "11" 행이 있고, "10~11" 행에 걸친 큰 셀 "김다희 강사":
  - ✅ 올바름: {"title": "김다희 강사", "startTime": "10:00", "endTime": "12:00"} (2시간! 오전은 1개 행이 1시간)
  - ❌ 잘못: {"title": "김다희 강사", "startTime": "10:00", "endTime": "11:00"} (1시간으로 잘못!)
  - ❌ 잘못: {"title": "김다희 강사", "startTime": "10:00", "endTime": "10:30"} (30분으로 잘못!)

- "6" 행에만 있는 셀 "김다희 강사":
  - ✅ 올바름: {"title": "김다희 강사", "startTime": "18:00", "endTime": "19:00"} (1시간! "6" 행은 1시간 단위)
  - ❌ 잘못: {"title": "김다희 강사", "startTime": "18:00", "endTime": "18:30"} (30분으로 잘못!)
  - ⚠️⚠️ **"6" 행은 1시간 단위! 절대 30분 아님!**

- "7" 행에만 있는 작은 셀 "이고은 원장":
  - ✅ 올바름: {"title": "이고은 원장", "startTime": "19:00", "endTime": "19:30"} (30분! "7" 행부터 30분 단위)
  - ❌ 잘못: {"title": "이고은 원장", "startTime": "19:00", "endTime": "20:00"} (1시간으로 잘못!)
  - ⚠️⚠️ **"7" 행에만 있고 "7:30" 행 경계선을 안 넘었으면 무조건 30분!**

- "7"+"7:30" 행에 걸친 셀 "이민영 강사":
  - ✅ 올바름: {"title": "이민영 강사", "startTime": "19:00", "endTime": "20:00"} (1시간! 2개 행 병합)
  - ❌ 잘못: {"title": "이민영 강사", "startTime": "19:00", "endTime": "19:30"} (30분으로 잘못!)
- 왼쪽 열: "7-7:30" → 이 행의 모든 일정은 startTime: "19:00", endTime: "19:30" (정확히 30분!)
- 왼쪽 열: "7:30-8" → 이 행의 모든 일정은 startTime: "19:30", endTime: "20:00" (정확히 30분!)
- 왼쪽 열: "8-8:30" → 이 행의 모든 일정은 startTime: "20:00", endTime: "20:30" (정확히 30분!)
- 왼쪽 열: "8:30-9" → 이 행의 모든 일정은 startTime: "20:30", endTime: "21:00" (정확히 30분!)

**구체적인 예시 (필라테스 시간표):**

왼쪽 열 | 월요일         | 수요일
--------|---------------|-------------
7       | 이고은 원장    | 이고은 원장
7:30    | 이민영 강사    | 이민영 강사
8       | 박진영 강사    | 이고은 원장

→ **올바른 추출 (총 6개):**
1. {"title": "이고은 원장", "days": ["월"], "startTime": "19:00", "endTime": "19:30", "instructor": "이고은"}
2. {"title": "이민영 강사", "days": ["월"], "startTime": "19:30", "endTime": "20:00", "instructor": "이민영"}
3. {"title": "박진영 강사", "days": ["월"], "startTime": "20:00", "endTime": "20:30", "instructor": "박진영"}
4. {"title": "이고은 원장", "days": ["수"], "startTime": "19:00", "endTime": "19:30", "instructor": "이고은"}
5. {"title": "이민영 강사", "days": ["수"], "startTime": "19:30", "endTime": "20:00", "instructor": "이민영"}
6. {"title": "이고은 원장", "days": ["수"], "startTime": "20:00", "endTime": "20:30", "instructor": "이고은"}

**잘못된 예시 (절대 금지!):**
- ❌ 한 셀에 "주니어A\n사랑T"가 있는데 2개 일정으로 추출:
  - {"title": "주니어A", "startTime": "15:00", "endTime": "16:00"}
  - {"title": "사랑T", "startTime": "15:00", "endTime": "16:00"}
  - **세로로 분할되어 2개 블록으로 나타남! 이건 1개 일정이어야 함!**
  - ✅ **올바름:** {"title": "주니어A", "instructor": "사랑T", "startTime": "15:00", "endTime": "16:00"}

- ❌ {"title": "김다희 강사", "days": ["월"], "startTime": "18:00", "endTime": "18:30"}
  - **"6" 행만 차지하는데 30분으로 잘못! "6" 행은 1시간 단위!**
  - **18:30-19:00이 빈칸으로 남음!**
- ❌ {"title": "이고은 원장", "days": ["월"], "startTime": "19:00", "endTime": "20:00"}
  - **"7" 행만 차지하는데 1시간으로 잘못!**
  - **"7" 행부터는 30분 단위!**
- ❌ {"title": "김다희 강사", "days": ["월"], "startTime": "10:00", "endTime": "11:00"}
  - **"10"+"11" 행 병합인데 1시간으로 줄임!**
  - **오전은 1개 행이 1시간인데 2개 행을 1시간으로 계산!**
- ❌ "7-7:30" 행인데 19:00-19:20, 19:20-19:30으로 쪼갬
- ⚠️⚠️⚠️ **중요: 왼쪽 열 시간 간격을 먼저 보고 1개 행이 몇 분인지 파악하세요!**
- ⚠️⚠️⚠️ **"6" 행은 1시간, "7" 행부터는 30분!**
- ⚠️⚠️⚠️ **한 셀 안에 여러 줄이 있으면 1개 일정! 세로로 쪼개지 마세요!**

**학원/PT 수업 시간대 컨텍스트**:
- 학원이나 PT 수업은 **오후/저녁 시간대**에만 있습니다
- 시간표 제목이나 주변 시간(18:00, 19:00, 20:00 등)을 보고 오후 시간으로 변환
- **절대 학원 수업이 07:00에 있을 수 없습니다!**

예시:
- "1시~2시 PM" → startTime: "13:00", endTime: "14:00"
- "5시~6시30분 PM" → startTime: "17:00", endTime: "18:30"
- "오후 3시~4시30분" → startTime: "15:00", endTime: "16:30"
- "7-7:30" (학원 시간표) → startTime: "19:00", endTime: "19:30"
- "8-8:30" (학원 시간표) → startTime: "20:00", endTime: "20:30"

**절대 오전(00:00~11:59)에 학원/축구 수업이 있을 수 없음**.
PM이나 오후가 보이면 반드시 13:00 이후로 변환!

**⚠️⚠️⚠️ 최종 체크리스트 (제출 전 반드시 확인!) ⚠️⚠️⚠️**
1. **학원 시간표인가요?**
   - 한 이미지에 "초등부", "중등부", "고등부"가 여러 개 있나요?
   - 있다면 **모든 학년부를 각각 추출**했는지 확인!
   - 초등부만 추출하고 중등부/고등부를 빠뜨리지 않았는지 확인!

2. **각 셀의 gradeLevel을 개별적으로 설정했나요?**
   - 같은 이미지라도 셀마다 gradeLevel이 다를 수 있습니다!
   - "초등부" 텍스트가 있는 셀 → gradeLevel: "초등부"
   - "중등부" 텍스트가 있는 셀 → gradeLevel: "중등부"
   - "고등부" 텍스트가 있는 셀 → gradeLevel: "고등부"

3. **모든 학년부를 찾았나요?**
   - 이미지를 다시 한번 스캔해서 놓친 "초등부", "중등부", "고등부"가 없는지 확인!
   - 예: 월요일에만 있고 화요일에도 있을 수 있습니다!

반드시 유효한 JSON만 반환하고, 다른 설명은 포함하지 마세요.
`;
}

module.exports = { getOcrPrompt };
