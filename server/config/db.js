/**
 * ===================================================================================================
 * db.js - MongoDB ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
 * ===================================================================================================
 *
 * ðŸ“ ìœ„ì¹˜: ë°±ì—”ë“œ > server/config > db.js
 * ðŸŽ¯ ì£¼ìš” ê¸°ëŠ¥:
 *    - Mongoose ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ MongoDB ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²°ì„ ìˆ˜ë¦½.
 *    - í™˜ê²½ë³€ìˆ˜(MONGO_URI)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì ‘ì† ì •ë³´ë¥¼ ì„¤ì •í•˜ë©°, ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ì—ëŸ¬ í•¸ë“¤ë§ ìˆ˜í–‰.
 *    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œìž‘ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆìŒì„ ì½˜ì†”ì— í™•ì¸ ë¡œê·¸ ì¶œë ¥.
 *
 * ðŸ”— ì—°ê²°ëœ íŒŒì¼:
 *    - server/index.js - ì„œë²„ êµ¬ë™ ì‹œ ì´ ëª¨ë“ˆì„ í˜¸ì¶œí•˜ì—¬ DB ì—°ê²° ì‹œìž‘.
 *
 * âœï¸ ìˆ˜ì • ê°€ì´ë“œ:
 *    - DB ì ‘ì† ì˜µì…˜(ì»¤ë„¥ì…˜ í’€ í¬ê¸° ë“±)ì„ ì¡°ì •í•˜ë ¤ë©´ mongoose.connectì˜ ë‘ ë²ˆì§¸ ì¸ìž ê°ì²´ ìˆ˜ì •.
 *    - ë¡œì»¬ ê°œë°œ í™˜ê²½ì˜ ê¸°ë³¸ DB ì´ë¦„ì„ ë³€ê²½í•˜ë ¤ë©´ mongoURIì˜ í´ë°±ê°’ ìˆ˜ì •.
 *
 * ðŸ“ ì°¸ê³ ì‚¬í•­:
 *    - DB ì—°ê²°ì— ì‹¤íŒ¨í•  ê²½ìš°, ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ì„ ìœ„í•´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œ(exit 1)í•˜ë„ë¡ ì„¤ê³„ë¨.
 *
 * ===================================================================================================
 */

const mongoose = require('mongoose');

/**
 * connectDB
 * @description MongoDBì— ì ‘ì†ì„ ì‹œë„í•˜ê³  ì—°ê²° ì„±ê³µ ì‹œ ì»¤ë„¥ì…˜ ì •ë³´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
 */
const connectDB = async () => {
  try {
    const mongoURI = process.env.MONGO_URI || 'mongodb://localhost:27017/ai-scheduling';
    const conn = await mongoose.connect(mongoURI, {
      useNewUrlParser: true,
      useUnifiedTopology: true,
    });
    console.log(`MongoDB Connected: ${conn.connection.host}`);
  } catch (err) {
    console.error(`MongoDB connection error: ${err.message}`);
    process.exit(1);
  }
};

module.exports = connectDB;